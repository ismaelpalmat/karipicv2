<div>
  <% @photos.each do |photo| %>
  <div class="photo">
  <h3>User: <%= photo.user.present? ? photo.user.email : "Unknown User" %></h3>
    <%= image_tag(photo.image_url, alt: 'Image') if photo.image_url.present? %>
  </div>
<% end %>

  <p>
    <strong>Titular: </strong>
    <%= photo.caption.presence || "No caption available" %>  <!-- Si no hay caption, mostrar un texto por defecto -->
  </p>

  <!-- Mostrar los comentarios asociados -->
  <div>
    <strong>Comentarios:</strong>
      <ul>
        <% photo.comments.each do |comment| %>  <!-- Recorrer cada comentario -->
          <li><%= comment.content %></li>  <!-- Mostrar el contenido del comentario -->
        <% end %>
      </ul>
          <% if photo.comments.any? %>  <!-- Verificar si hay comentarios -->
    <% else %>
      <p>No hay comentarios en la publicacion.</p>  <!-- Si no hay comentarios -->
    <% end %>
  </div>

  <!-- Formulario para agregar un nuevo comentario -->
  
  <%= form_with(model: [photo, Comment.new], local: true) do |form| %>
    <div class="field">
      <%= form.label :content, "Agregar comentario:" %>
    </div>

    <div class="actions">
      <%= form.text_area :content %>
    </div>

    <div class="div">
      <%= form.submit "Comentar" %>
    </div>
  <% end %>
</div>

